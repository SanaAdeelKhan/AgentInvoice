<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentInvoice - Autonomous Payments Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .mode-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 10px;
        }

        .connection-status {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            border-radius: 5px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card.autonomous {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .stat-card.autonomous h3,
        .stat-card.autonomous .value {
            color: white;
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .section h2 {
            margin-bottom: 20px;
            color: #667eea;
        }

        .agent-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .agent-card {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .agent-info h4 {
            color: #667eea;
            margin-bottom: 5px;
        }

        .agent-balance {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .contract-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .contract-item {
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .contract-item strong {
            display: block;
            margin-bottom: 5px;
            color: #667eea;
        }

        .contract-item code {
            font-size: 0.85em;
            color: #666;
            word-break: break-all;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
        }

        .demo-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }

        .demo-note strong {
            color: #856404;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .feature-list li:before {
            content: "‚úÖ ";
            color: #4caf50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° AgentInvoice Dashboard</h1>
            <p>Autonomous AI Agent Billing on Arc Testnet</p>
            <span class="mode-badge">ü§ñ AUTONOMOUS PAYMENTS ENABLED</span>
            <div class="connection-status" id="connection-status">
                Connecting to blockchain...
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card autonomous">
                <h3>ü§ñ Autonomous Mode</h3>
                <div class="value">ACTIVE</div>
            </div>
            <div class="stat-card">
                <h3>üìä System Status</h3>
                <div class="value">READY</div>
            </div>
            <div class="stat-card">
                <h3>‚ö° API Server</h3>
                <div class="value" style="font-size: 1.2em;">PORT 3001</div>
            </div>
            <div class="stat-card">
                <h3>üîó Contracts</h3>
                <div class="value">4</div>
            </div>
        </div>

        <div class="section">
            <h2>ü§ñ Active AI Agents (Demo Mode)</h2>
            <p style="color: #666; margin-bottom: 15px;">Simulated agents with escrow balances</p>
            <div class="agent-list">
                <div class="agent-card">
                    <div class="agent-info">
                        <h4>ü§ñ ai-agent-demo-001</h4>
                        <p style="color: #666; font-size: 0.9em;">
                            Primary test agent ‚Ä¢ Last active: Just now
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <div class="agent-balance">5.00 USDC</div>
                        <p style="color: #999; font-size: 0.85em;">Escrow Balance</p>
                    </div>
                </div>
                <div class="agent-card">
                    <div class="agent-info">
                        <h4>ü§ñ gpt-assistant-alpha</h4>
                        <p style="color: #666; font-size: 0.9em;">
                            Demo agent ‚Ä¢ Last active: 5 mins ago
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <div class="agent-balance">12.50 USDC</div>
                        <p style="color: #999; font-size: 0.85em;">Escrow Balance</p>
                    </div>
                </div>
                <div class="agent-card">
                    <div class="agent-info">
                        <h4>ü§ñ claude-automation-bot</h4>
                        <p style="color: #666; font-size: 0.9em;">
                            Demo agent ‚Ä¢ Last active: 1 hour ago
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <div class="agent-balance">3.20 USDC</div>
                        <p style="color: #999; font-size: 0.85em;">Escrow Balance</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚ú® Key Features</h2>
            <ul class="feature-list">
                <li><strong>Autonomous Payments:</strong> AI agents pay automatically from pre-funded escrow</li>
                <li><strong>No Human Approval:</strong> Instant settlements without manual intervention</li>
                <li><strong>Blockchain Audit Trail:</strong> Every transaction recorded on Arc Testnet</li>
                <li><strong>AgentEscrow Contract:</strong> Secure escrow management for AI agents</li>
                <li><strong>Real-time Balance Tracking:</strong> Monitor agent spending in real-time</li>
                <li><strong>Multiple Payment Modes:</strong> Support for both autonomous and manual flows</li>
            </ul>

            <div class="demo-note">
                <strong>üìä Demo Mode Active</strong>
                <p style="margin-top: 10px;">This dashboard shows the autonomous payment system. To see live invoices from your blockchain deployment, check the original dashboard in <code>dashboard-simple/</code>.</p>
                <p style="margin-top: 10px;">The autonomous API is running on <strong>localhost:3001</strong> - Use the test script to create autonomous invoices!</p>
            </div>
        </div>

        <div class="section">
            <h2>üöÄ How It Works</h2>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-top: 15px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">Autonomous Payment Flow:</h3>
                <ol style="line-height: 2; color: #666;">
                    <li><strong>Setup:</strong> AI agent funds escrow with USDC</li>
                    <li><strong>Use Service:</strong> Agent calls API endpoint to use a service</li>
                    <li><strong>Auto-Bill:</strong> System creates invoice on blockchain</li>
                    <li><strong>Auto-Pay:</strong> Payment executes automatically from escrow</li>
                    <li><strong>Receipt:</strong> Agent receives instant payment confirmation</li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>üìù Contract Information</h2>
            <div class="contract-grid">
                <div class="contract-item">
                    <strong>Network</strong>
                    <code>Arc Testnet</code>
                </div>
                <div class="contract-item">
                    <strong>Chain ID</strong>
                    <code id="chain-id">5042002</code>
                </div>
                <div class="contract-item">
                    <strong>InvoiceRegistry</strong>
                    <code id="registry-address">0x34158fedf9f863cfdf7da54b3baf7b2ae700b70c</code>
                </div>
                <div class="contract-item">
                    <strong>PaymentProcessor</strong>
                    <code id="payment-address">0x3e412244e13701516a3a364278e4f43ba036b864</code>
                </div>
                <div class="contract-item">
                    <strong>AgentEscrow (NEW!) üéâ</strong>
                    <code id="escrow-address">0x13b31b30496cfefc1c30289b03210276ed6a566d</code>
                </div>
                <div class="contract-item">
                    <strong>Circle Wallet</strong>
                    <code id="wallet-address">0x264d02e95d182427db11a111d7b3d256d16f3f87</code>
                </div>
            </div>
        </div>

        <div class="footer">
            <p style="font-size: 1.2em; margin-bottom: 10px;">üèÜ Built for Agentic Commerce on Arc Hackathon üèÜ</p>
            <p>Powered by Circle ‚Ä¢ Autonomous Payments with AgentEscrow</p>
            <p style="margin-top: 10px; opacity: 0.8;">Deployed via Circle Console ‚Ä¢ Zero Gas Fees</p>
        </div>
    </div>

    <script>
        const CONFIG = {
            RPC_URL: 'https://rpc.testnet.arc.network',
            REGISTRY_ADDRESS: '0x34158fedf9f863cfdf7da54b3baf7b2ae700b70c',
            PAYMENT_ADDRESS: '0x3e412244e13701516a3a364278e4f43ba036b864',
            ESCROW_ADDRESS: '0x13b31b30496cfefc1c30289b03210276ed6a566d',
            WALLET_ADDRESS: '0x264d02e95d182427db11a111d7b3d256d16f3f87'
        };

        async function init() {
            try {
                const provider = new ethers.providers.JsonRpcProvider(CONFIG.RPC_URL);
                const network = await provider.getNetwork();
                
                document.getElementById('connection-status').innerHTML = `
                    ‚úÖ Connected to Arc Testnet (Chain ID: ${network.chainId})
                    <br>Registry: ${CONFIG.REGISTRY_ADDRESS}
                    <br>AgentEscrow: ${CONFIG.ESCROW_ADDRESS}
                `;
            } catch (error) {
                console.error('Connection error:', error);
                document.getElementById('connection-status').innerHTML = `
                    ‚ö†Ô∏è Connection limited (RPC may be throttled)
                    <br>Contracts deployed and ready!
                `;
            }
        }

        window.onload = init;
    </script>
</body>
</html>
